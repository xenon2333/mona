(function(){var t={3727:function(t,n,e){var r=e(47061),o=r.match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},14602:function(t,n,e){var r=e(30200),o=e(5549),i=e(22975),c=e(18665),a=e(97712),s=e(31602),u=s("iterator"),f=s("toStringTag"),l=c.values,p=function(t,n){if(t){if(t[u]!==l)try{a(t,u,l)}catch(r){t[u]=l}if(t[f]||a(t,f,n),o[n])for(var e in c)if(t[e]!==c[e])try{a(t,e,c[e])}catch(r){t[e]=c[e]}}};for(var h in o)p(r[h]&&r[h].prototype,h);p(i,"DOMTokenList")},20610:function(t,n,e){var r=e(95362);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:r(t)}},24881:function(t,n,e){"use strict";var r=e(13838),o=TypeError;t.exports=function(t,n){if(!delete t[n])throw o("Cannot delete property "+r(n)+" of "+r(t))}},26820:function(t,n,e){var r=e(30281),o=Error,i=r("".replace),c=function(t){return String(o(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,s=a.test(c);t.exports=function(t,n){if(s&&"string"==typeof t&&!o.prepareStackTrace)while(n--)t=i(t,a,"");return t}},35231:function(t,n,e){"use strict";var r=e(51605),o=e(30281),i=e(24601),c=e(92612),a=e(23493),s=e(24881),u=e(95362),f=e(92074),l=e(68039),p=e(92349),h=e(3727),g=e(77413),v=e(6845),d=e(79965),m=[],y=o(m.sort),b=o(m.push),w=f(function(){m.sort(void 0)}),x=f(function(){m.sort(null)}),k=p("sort"),S=!f(function(){if(v)return v<70;if(!(h&&h>3)){if(g)return!0;if(d)return d<603;var t,n,e,r,o="";for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)m.push({k:n+r,v:e})}for(m.sort(function(t,n){return n.v-t.v}),r=0;r<m.length;r++)n=m[r].k.charAt(0),o.charAt(o.length-1)!==n&&(o+=n);return"DGBEFHACIJK"!==o}}),E=w||!x||!k||!S,T=function(t){return function(n,e){return void 0===e?-1:void 0===n?1:void 0!==t?+t(n,e)||0:u(n)>u(e)?1:-1}};r({target:"Array",proto:!0,forced:E},{sort:function(t){void 0!==t&&i(t);var n=c(this);if(S)return void 0===t?y(n):y(n,t);var e,r,o=[],u=a(n);for(r=0;r<u;r++)r in n&&b(o,n[r]);l(o,T(t)),e=o.length,r=0;while(r<e)n[r]=o[r++];while(r<u)s(n,r++);return n}})},42453:function(t,n,e){async function r(){const t=await Promise.all([e.e(233),e.e(485)]).then(e.bind(e,52233));self.onmessage=function(n){try{const o=n.data.potentialFunctionInterface,i=n.data.artifacts;console.log("Worker received pf:",o),console.log("Worker received artifacts count:",null===i||void 0===i?void 0:i.length);const c=i.filter(t=>t.level>20||t.level<0||!Number.isInteger(t.level));let a=c.length>0;if(a?(console.warn(`Found ${c.length} invalid artifacts, using safe batch processing mode`),c.forEach(t=>{t.level>20&&(t.level=20),t.level<0&&(t.level=0),Number.isInteger(t.level)||(t.level=Math.floor(t.level))}),console.log("Fixed invalid artifacts, switching to batch mode")):console.log("All artifacts are valid, using high-performance single-pass mode"),!a&&i.length>0){console.log("Starting high-performance processing...");try{const s=t.PotentialInterface.get_potential(i,o);console.log("High-performance processing completed successfully"),self.postMessage({type:"results",data:{results:s}})}catch(r){console.error("High-performance mode failed, falling back to batch mode:",r),a=!0}}if(a){console.log("Starting safe batch processing mode...");const u=10,f=i.length;let l=0,p=[],h=Date.now();async function e(n){const c=Date.now(),a=Math.min(n+u,f),s=i.slice(n,a);console.log(`Processing batch ${Math.floor(n/u)+1}, artifacts ${n}-${a-1}`),console.log(`Time since last progress: ${c-h}ms`);try{const n=(n,e=5e3)=>new Promise((i,c)=>{const a=setTimeout(()=>{c(new Error(`Batch processing timeout after ${e}ms`))},e);try{const e=t.PotentialInterface.get_potential(n,o);clearTimeout(a),i(e)}catch(r){clearTimeout(a),c(r)}}),e=await n(s,5e3);p=p.concat(e),l+=s.length,console.log("Batch processed successfully")}catch(g){console.warn("Batch processing failed, trying individual processing:",g);for(let e=0;e<s.length;e++){const i=s[e];try{console.log(`Processing artifact ${n+e} individually, level: ${i.level}`);const c=await new Promise((n,e)=>{const c=setTimeout(()=>{e(new Error("Individual artifact timeout after 2000ms"))},2e3);try{const e=t.PotentialInterface.get_potential([i],o);clearTimeout(c),n(e)}catch(r){clearTimeout(c),e(r)}});p.push(c[0]),console.log(`Artifact ${n+e} processed successfully`)}catch(v){console.error(`Error processing artifact ${n+e}:`,v),p.push([i.id||n+e,0])}}l+=s.length}h=Date.now(),self.postMessage({type:"progress",processed:l,total:f,percentage:Math.round(l/f*100)}),a<f?setTimeout(()=>{e(a).catch(t=>{console.error("Error in next batch:",t),self.postMessage({type:"error",message:`处理下一批次时发生错误: ${t.message||"Unknown error"}`})})},20):(console.log("All batches processed, sorting results"),p.sort((t,n)=>n[1]-t[1]),console.log("Sending sorted results"),self.postMessage({type:"results",data:{results:p}}))}e(0).catch(t=>{console.error("Error in processBatch:",t),self.postMessage({type:"error",message:`处理批次时发生错误: ${t.message||"Unknown error"}`})})}}catch(r){console.error("Worker error:",r),self.postMessage({type:"error",message:r.message||"Unknown error"})}},self.postMessage({type:"ready"})}e(14602),e(83515),e(35231),r().catch(t=>{console.log("error from compute potential worker: "+t.toString())})},43129:function(t,n,e){var r=e(31602),o=r("toStringTag"),i={};i[o]="z",t.exports="[object z]"===String(i)},52057:function(t,n,e){"use strict";var r=e(86032),o=e(43610),i=e(66843);t.exports=function(t,n,e){var c=r(n);c in t?o.f(t,c,i(0,e)):t[c]=e}},55833:function(t,n,e){var r=e(65335),o=e(97712);t.exports=function(t,n){r(n)&&"cause"in n&&o(t,"cause",n.cause)}},56527:function(t,n,e){var r=e(43610).f;t.exports=function(t,n,e){e in t||r(t,e,{configurable:!0,get:function(){return n[e]},set:function(t){n[e]=t}})}},68039:function(t,n,e){var r=e(76056),o=Math.floor,i=function(t,n){var e=t.length,s=o(e/2);return e<8?c(t,n):a(t,i(r(t,0,s),n),i(r(t,s),n),n)},c=function(t,n){var e,r,o=t.length,i=1;while(i<o){r=i,e=t[i];while(r&&n(t[r-1],e)>0)t[r]=t[--r];r!==i++&&(t[r]=e)}return t},a=function(t,n,e,r){var o=n.length,i=e.length,c=0,a=0;while(c<o||a<i)t[c+a]=c<o&&a<i?r(n[c],e[a])<=0?n[c++]:e[a++]:c<o?n[c++]:e[a++];return t};t.exports=i},70462:function(t,n,e){var r=e(92074),o=e(66843);t.exports=!r(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)})},76056:function(t,n,e){var r=e(6539),o=e(23493),i=e(52057),c=Array,a=Math.max;t.exports=function(t,n,e){for(var s=o(t),u=r(n,s),f=r(void 0===e?s:e,s),l=c(a(f-u,0)),p=0;u<f;u++,p++)i(l,p,t[u]);return l.length=p,l}},77413:function(t,n,e){var r=e(47061);t.exports=/MSIE|Trident/.test(r)},78120:function(t,n,e){"use strict";var r=e(56492),o=e(36490),i=e(97712),c=e(47658),a=e(39686),s=e(84361),u=e(56527),f=e(93054),l=e(20610),p=e(55833),h=e(26820),g=e(70462),v=e(65077),d=e(6926);t.exports=function(t,n,e,m){var y="stackTraceLimit",b=m?2:1,w=t.split("."),x=w[w.length-1],k=r.apply(null,w);if(k){var S=k.prototype;if(!d&&o(S,"cause")&&delete S.cause,!e)return k;var E=r("Error"),T=n(function(t,n){var e=l(m?n:t,void 0),r=m?new k(t):new k;return void 0!==e&&i(r,"message",e),g&&i(r,"stack",h(r.stack,2)),this&&c(S,this)&&f(r,this,T),arguments.length>b&&p(r,arguments[b]),r});if(T.prototype=S,"Error"!==x?a?a(T,E):s(T,E,{name:!0}):v&&y in k&&(u(T,k,y),u(T,k,"prepareStackTrace")),s(T,k),!d)try{S.name!==x&&i(S,"name",x),S.constructor=T}catch(_){}return T}}},79965:function(t,n,e){var r=e(47061),o=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},83062:function(t,n,e){var r=e(43129),o=e(78420),i=e(18569),c=e(31602),a=c("toStringTag"),s=Object,u="Arguments"==i(function(){return arguments}()),f=function(t,n){try{return t[n]}catch(e){}};t.exports=r?i:function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=f(n=s(t),a))?e:u?i(n):"Object"==(r=i(n))&&o(n.callee)?"Arguments":r}},83515:function(t,n,e){var r=e(51605),o=e(30200),i=e(99070),c=e(78120),a="WebAssembly",s=o[a],u=7!==Error("e",{cause:7}).cause,f=function(t,n){var e={};e[t]=c(t,n,u),r({global:!0,constructor:!0,arity:1,forced:u},e)},l=function(t,n){if(s&&s[t]){var e={};e[t]=c(a+"."+t,n,u),r({target:a,stat:!0,constructor:!0,arity:1,forced:u},e)}};f("Error",function(t){return function(n){return i(t,this,arguments)}}),f("EvalError",function(t){return function(n){return i(t,this,arguments)}}),f("RangeError",function(t){return function(n){return i(t,this,arguments)}}),f("ReferenceError",function(t){return function(n){return i(t,this,arguments)}}),f("SyntaxError",function(t){return function(n){return i(t,this,arguments)}}),f("TypeError",function(t){return function(n){return i(t,this,arguments)}}),f("URIError",function(t){return function(n){return i(t,this,arguments)}}),l("CompileError",function(t){return function(n){return i(t,this,arguments)}}),l("LinkError",function(t){return function(n){return i(t,this,arguments)}}),l("RuntimeError",function(t){return function(n){return i(t,this,arguments)}})},92349:function(t,n,e){"use strict";var r=e(92074);t.exports=function(t,n){var e=[][t];return!!e&&r(function(){e.call(null,n||function(){return 1},1)})}},93054:function(t,n,e){var r=e(78420),o=e(65335),i=e(39686);t.exports=function(t,n,e){var c,a;return i&&r(c=n.constructor)&&c!==e&&o(a=c.prototype)&&a!==e.prototype&&i(t,a),t}},95362:function(t,n,e){var r=e(83062),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},99070:function(t,n,e){var r=e(38823),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?c.bind(i):function(){return c.apply(i,arguments)})}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return t[r](i,i.exports,e),i.exports}e.m=t,e.x=function(){var t=e.O(void 0,[243],function(){return e(42453)});return t=e.O(t),t},function(){var t="function"===typeof Symbol,n=t?Symbol("webpack queues"):"__webpack_queues__",r=t?Symbol("webpack exports"):"__webpack_exports__",o=t?Symbol("webpack error"):"__webpack_error__",i=function(t){t&&t.d<1&&(t.d=1,t.forEach(function(t){t.r--}),t.forEach(function(t){t.r--?t.r++:t()}))},c=function(t){return t.map(function(t){if(null!==t&&"object"===typeof t){if(t[n])return t;if(t.then){var e=[];e.d=0,t.then(function(t){c[r]=t,i(e)},function(t){c[o]=t,i(e)});var c={};return c[n]=function(t){t(e)},c}}var a={};return a[n]=function(){},a[r]=t,a})};e.a=function(t,e,a){var s;a&&((s=[]).d=-1);var u,f,l,p=new Set,h=t.exports,g=new Promise(function(t,n){l=n,f=t});g[r]=h,g[n]=function(t){s&&t(s),p.forEach(t),g["catch"](function(){})},t.exports=g;var v=function(t){var e;u=c(t);var i=function(){return u.map(function(t){if(t[o])throw t[o];return t[r]})},a=new Promise(function(t){e=function(){t(i)},e.r=0;var r=function(t){t!==s&&!p.has(t)&&(p.add(t),t&&!t.d&&(e.r++,t.push(e)))};u.map(function(t){t[n](r)})});return e.r?a:i()},d=function(t){t?l(g[o]=t):f(h),i(s)};e(v,d),s&&s.d<0&&(s.d=0)}}(),function(){var t=[];e.O=function(n,r,o,i){if(!r){var c=1/0;for(f=0;f<t.length;f++){r=t[f][0],o=t[f][1],i=t[f][2];for(var a=!0,s=0;s<r.length;s++)(!1&i||c>=i)&&Object.keys(e.O).every(function(t){return e.O[t](r[s])})?r.splice(s--,1):(a=!1,i<c&&(c=i));if(a){t.splice(f--,1);var u=o();void 0!==u&&(n=u)}}return n}i=i||0;for(var f=t.length;f>0&&t[f-1][2]>i;f--)t[f]=t[f-1];t[f]=[r,o,i]}}(),function(){e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}}(),function(){e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce(function(n,r){return e.f[r](t,n),n},[]))}}(),function(){e.u=function(t){return"js/"+t+"-legacy."+{233:"684a8b3b",243:"ccec218e",485:"b9345603"}[t]+".js"}}(),function(){e.miniCssF=function(t){}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.v=function(t,n,r,o){var i=fetch(e.p+""+r+".module.wasm"),c=function(){return i.then(function(t){return t.arrayBuffer()}).then(function(t){return WebAssembly.instantiate(t,o)}).then(function(n){return Object.assign(t,n.instance.exports)})};return i.then(function(n){return"function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(n,o).then(function(n){return Object.assign(t,n.instance.exports)},function(t){if("application/wasm"!==n.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t),c();throw t}):c()})}}(),function(){e.p="/"}(),function(){var t={453:1},n=function(n){var r=n[0],i=n[1],c=n[2];for(var a in i)e.o(i,a)&&(e.m[a]=i[a]);c&&c(e);while(r.length)t[r.pop()]=1;o(n)};e.f.i=function(n,r){t[n]||importScripts(e.p+e.u(n))};var r=self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[],o=r.push.bind(r);r.push=n}(),function(){var t=e.x;e.x=function(){return e.e(243).then(t)}}();e.x()})();