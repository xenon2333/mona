"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[803],{23220:function(e,t,l){l.r(t),l.d(t,{default:function(){return ue}});var n=l(74061),a=l(79475),o=(l(47679),l(27603)),c=(l(79457),l(50887)),i=(l(81826),l(8365),l(34852),l(37241)),r=(l(38222),l(10700)),d=(l(38264),l(74093)),u=(l(30023),l(1545)),m=(l(8686),l(53588)),s=l(88847),f=(l(25126),l(55343),l(94900),l(99482),l(5260)),p=(l(3e3),l(14602),l(87136),l(47120));const v=["onClick"];function k(e,t,l,a,o,c){return(0,n.openBlock)(),(0,n.createElementBlock)("ul",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(l.items,t=>((0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t.index,class:(0,n.normalizeClass)({active:t.index===l.modelValue}),onClick:l=>e.$emit("update:modelValue",t.index)},(0,n.toDisplayString)(t.title),11,v))),128))])}var V={name:"MyList",props:["modelValue","items"],emits:["update:modelValue"]},h=l(66262);const x=(0,h.A)(V,[["render",k],["__scopeId","data-v-0813ecdb"]]);var B=x,N=l(11825),g=l(23556),C=l(10644),w=l(73427),y=l(75841),E=l(53452);const A={class:"up"},_={class:"title"},D={class:"buttons"},b={class:"body"};var T=(0,n.defineComponent)({__name:"KumiItem",props:{data:null},emits:["click","deleteArtifact","delete","edit"],setup(e,{emit:t}){const l=e,a=(0,w.D)(),o=(0,n.computed)(()=>{let e=[];const t={};for(let o of null!==(n=l.data.artifactIds)&&void 0!==n?n:[]){var n;if(o){const e=a.artifacts.value.get(o);e&&(t[e.position]=e)}}for(let l=0;l<5;l++){const n=t[N.Xq[l]];n?e.push(n):e.push(null)}return e});return(e,a)=>{const c=r.S2;return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",A,[(0,n.createElementVNode)("p",_,(0,n.toDisplayString)(l.data.title),1),(0,n.createElementVNode)("div",D,[(0,n.createVNode)(c,{text:"",icon:(0,n.unref)(y.A),title:"删除",onClick:a[0]||(a[0]=e=>t("delete")),circle:""},null,8,["icon"]),(0,n.createVNode)(c,{text:"",icon:(0,n.unref)(E.A),title:"重命名",onClick:a[1]||(a[1]=e=>t("edit")),circle:""},null,8,["icon"])])]),(0,n.createElementVNode)("div",b,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(o),(e,l)=>((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:l},[e?((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(C.A),{key:0,class:"artifact-item",width:"200px",item:e,selectable:"",onClick:l=>t("click",e.position),onDelete:l=>t("deleteArtifact",e.id),buttons:!0,"lock-button":!1,"delete-button":!0},null,8,["item","onClick","onDelete"])):((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(g.A),{key:1,class:"artifact-item",onClick:e=>t("click",(0,n.unref)(N.Xq)[l])},null,8,["onClick"]))],64))),128))])])}}});const P=(0,h.A)(T,[["__scopeId","data-v-3b630bd6"]]);var S=P,F=l(97254),z=l(61967),K=l(24821),M=l(59360),H=l(49603),I=l(45420);const U={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},L=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32zm384 416V416h64v128h128v64H544v128h-64V608H352v-64h128z"},null,-1),R=[L];function Y(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",U,R)}var W={name:"ep-folder-add",render:Y},q=l(61728),X=l(53832);const O={class:"m-toolbar hidden-md-and-up"},Z={class:"m-middle"},$={class:"pc-container"},j={class:"left mona-scroll-hidden hidden-sm-and-down"},G={class:"toolbar"},J={class:"mona-scroll-hidden left-list"},Q={class:"right mona-scroll-hidden"},ee={class:"hidden-md-and-up"},te={class:"toolbar2 hidden-sm-and-down"},le={class:"button-left"},ne={class:"button-right"},ae={class:"items mona-scroll-hidden"},oe={key:0},ce={key:1},ie={class:"dialog-footer"};var re=(0,n.defineComponent)({__name:"KumiPage",setup(e){const t=(0,z.H)(),{t:l}=(0,X.s9)(),v=(0,n.ref)(0),k=(0,n.computed)(()=>{let e=[];for(let l of t.dirs.value)e.push({index:l.id,title:l.title});return e}),V=(0,n.computed)(()=>{const e=t.itemById(v.value);return e?e.title:"title"}),h=(0,n.ref)(!1),x=(0,n.ref)(null),N=(0,n.ref)(""),g=(0,n.ref)(0);function C(e){const l=t.itemById(e);if(!l)return;x.value=e,N.value=l.title;let n=0;for(const a of t.dirs.value)if(a.children&&-1!==a.children.indexOf(e)){n=a.id;break}g.value=n,h.value=!0}function w(){if(null===x.value)return;const e=x.value,l=(N.value||"").trim(),n=g.value;l&&t.rename(e,l),void 0!==n&&t.moveKumi(e,n),h.value=!1}function A(){a.s.prompt(l("kumiPage.enterFolder"),l("kumiPage.newFolder"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then(({value:e})=>{e&&t.createDir(e)}).catch(()=>{})}function _(e){0!==e&&1!==e&&a.s.confirm(l("kumiPage.confirmDelete"),l("kumiPage.deleteFolder"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then(()=>{t.deleteDir(e),v.value=0})}function D(e){a.s.prompt(l("kumiPage.enterFolder"),l("kumiPage.renameFolder"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then(({value:l})=>{l&&t.rename(e,l)}).catch(()=>{})}function b(e){a.s.confirm(l("kumiPage.confirmClear"),l("kumiPage.clearFolder"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then(()=>{t.clearDir(e)})}const T=(0,n.computed)(()=>t.kumisByDirId.value[v.value]);function P(){a.s.prompt(l("kumiPage.enterKumi"),l("kumiPage.newKumi"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then(({value:e})=>{e&&t.createKumi(v.value,e)}).catch(()=>{})}function U(e){t.deleteKumi(e)}function L(e){C(e)}const R=(0,n.ref)(""),Y=(0,n.computed)(()=>new p.A(T.value,{keys:["title"]})),re=(0,n.computed)(()=>{if(""===R.value)return T.value;const e=Y.value.search(R.value);return e.map(e=>e.item)}),de=(0,n.ref)(!1),ue=(0,n.ref)("flower"),me=(0,n.ref)(0);function se(e){de.value=!1,t.addArtifact(me.value,e)}function fe(e,l){t.deleteArtifact(e,l)}function pe(e,t){ue.value=t,de.value=!0,me.value=e}function ve(e){"add"===e?A():e.startsWith("use")?v.value=parseInt(e.split(" ")[1]):"delete"===e?_(v.value):"rename"===e?D(v.value):"addKumi"===e&&P()}return(e,t)=>{const a=f.kZ,p=r.S2,x=s.c6,C=s.Iy,T=s.dW,z=m.A,Y=u.WK,X=d.tk,me=r.fg,ke=i.x0,Ve=o.xE,he=c.P9,xe=c.AV,Be=o.US;return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(a,{modelValue:de.value,"onUpdate:modelValue":t[0]||(t[0]=e=>de.value=e),title:(0,n.unref)(l)("kumiPage.selectArt"),width:(0,n.unref)(K.U)?"80%":"90%"},{default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(F.A),{position:ue.value,onSelect:se},null,8,["position"])]),_:1},8,["modelValue","title","width"]),(0,n.createElementVNode)("div",O,[(0,n.createVNode)(T,{trigger:"click",onCommand:ve},{dropdown:(0,n.withCtx)(()=>[(0,n.createVNode)(C,null,{default:(0,n.withCtx)(()=>[(0,n.createVNode)(x,{command:"add",icon:(0,n.unref)(W)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("kumiPage.newFolder")),1)]),_:1},8,["icon"]),(0,n.createVNode)(x,{command:"addKumi",icon:(0,n.unref)(M.A)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("kumiPage.newKumi")),1)]),_:1},8,["icon"]),0!==v.value?((0,n.openBlock)(),(0,n.createBlock)(x,{key:0,command:"delete",icon:(0,n.unref)(y.A)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("misc.del"))+'"'+(0,n.toDisplayString)((0,n.unref)(V))+'"',1)]),_:1},8,["icon"])):(0,n.createCommentVNode)("",!0),0!==v.value?((0,n.openBlock)(),(0,n.createBlock)(x,{key:1,command:"rename",icon:(0,n.unref)(E.A)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("misc.rename")),1)]),_:1},8,["icon"])):(0,n.createCommentVNode)("",!0),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(k),(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(x,{key:e.index,divided:0===t,command:"use "+e.index,icon:(0,n.unref)(I.A)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.title),1)]),_:2},1032,["divided","command","icon"]))),128))]),_:1})]),default:(0,n.withCtx)(()=>[(0,n.createVNode)(p,{icon:(0,n.unref)(H.A),size:"small",text:"",circle:""},null,8,["icon"])]),_:1}),(0,n.createElementVNode)("div",Z,(0,n.toDisplayString)((0,n.unref)(V)),1)]),(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("div",G,[(0,n.createVNode)(p,{type:"primary",icon:(0,n.unref)(M.A),onClick:A},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("kumiPage.newFolder")),1)]),_:1},8,["icon"])]),(0,n.createElementVNode)("div",J,[(0,n.createVNode)((0,n.unref)(B),{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),items:(0,n.unref)(k)},null,8,["modelValue","items"])])]),(0,n.createElementVNode)("div",Q,[(0,n.createElementVNode)("div",ee,[(0,n.createVNode)(Y,{modelValue:R.value,"onUpdate:modelValue":t[2]||(t[2]=e=>R.value=e),style:{"margin-bottom":"12px"},placeholder:(0,n.unref)(l)("misc.search")},{append:(0,n.withCtx)(()=>[(0,n.createVNode)(z)]),_:1},8,["modelValue","placeholder"])]),(0,n.createElementVNode)("div",te,[(0,n.createElementVNode)("div",le,[(0,n.createVNode)(p,{type:"primary",icon:(0,n.unref)(M.A),onClick:P},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("kumiPage.newKumi")),1)]),_:1},8,["icon"]),(0,n.createVNode)(Y,{modelValue:R.value,"onUpdate:modelValue":t[3]||(t[3]=e=>R.value=e),style:{"margin-left":"16px"},placeholder:(0,n.unref)(l)("misc.search")},{append:(0,n.withCtx)(()=>[(0,n.createVNode)(X,null,{default:(0,n.withCtx)(()=>[(0,n.createVNode)(z)]),_:1})]),_:1},8,["modelValue","placeholder"])]),(0,n.createElementVNode)("div",ne,[(0,n.createVNode)(me,null,{default:(0,n.withCtx)(()=>[0!==v.value&&1!==v.value?((0,n.openBlock)(),(0,n.createBlock)(p,{key:0,icon:(0,n.unref)(E.A),onClick:t[4]||(t[4]=e=>D(v.value))},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("misc.rename")),1)]),_:1},8,["icon"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(p,{icon:(0,n.unref)(q.A),onClick:t[5]||(t[5]=e=>b(v.value))},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("misc.clear")),1)]),_:1},8,["icon"]),0!==v.value&&1!==v.value?((0,n.openBlock)(),(0,n.createBlock)(p,{key:1,type:"danger",onClick:t[6]||(t[6]=e=>_(v.value)),title:(0,n.unref)(l)("kumiPage.deleteFolder"),icon:(0,n.unref)(y.A)},null,8,["title","icon"])):(0,n.createCommentVNode)("",!0)]),_:1})])]),(0,n.createElementVNode)("div",ae,[(0,n.unref)(re).length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",oe,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(re),e=>((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(S),{key:e.id,data:e,onDelete:t=>U(e.id),onEdit:t=>L(e.id),onClick:t=>pe(e.id,t),onDeleteArtifact:t=>fe(e.id,t)},null,8,["data","onDelete","onEdit","onClick","onDeleteArtifact"]))),128))])):((0,n.openBlock)(),(0,n.createElementBlock)("div",ce,[(0,n.createVNode)(ke)]))])])]),(0,n.createVNode)(a,{modelValue:h.value,"onUpdate:modelValue":t[10]||(t[10]=e=>h.value=e),title:(0,n.unref)(l)("kumiPage.renameKumi"),width:(0,n.unref)(K.U)?"400px":"90%"},{footer:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",ie,[(0,n.createVNode)(p,{onClick:t[9]||(t[9]=e=>h.value=!1)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("misc.cancel")),1)]),_:1}),(0,n.createVNode)(p,{type:"primary",onClick:w},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(l)("misc.confirm")),1)]),_:1})])]),default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("div",null,[(0,n.createVNode)(Be,{"label-position":"top"},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(Ve,{label:(0,n.unref)(l)("kumiPage.enterKumi")},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(Y,{modelValue:N.value,"onUpdate:modelValue":t[7]||(t[7]=e=>N.value=e),placeholder:""},null,8,["modelValue"])]),_:1},8,["label"]),(0,n.createVNode)(Ve,{label:(0,n.unref)(l)("kumiPage.moveTo")},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(xe,{modelValue:g.value,"onUpdate:modelValue":t[8]||(t[8]=e=>g.value=e),placeholder:""},{default:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(k),e=>((0,n.openBlock)(),(0,n.createBlock)(he,{key:e.index,label:e.title,value:e.index},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title","width"])])}}});const de=(0,h.A)(re,[["__scopeId","data-v-0c99199a"]]);var ue=de},45420:function(e,t,l){var n=l(74061);const a={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},o=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32z"},null,-1),c=[o];function i(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",a,c)}t.A={name:"ep-folder",render:i}},49603:function(e,t,l){var n=l(74061);const a={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},o=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224a112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96a48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224a112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96a48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224a112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96a48 48 0 0 0 0-96z"},null,-1),c=[o];function i(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",a,c)}t.A={name:"ep-more",render:i}},53588:function(e,t,l){var n=l(74061);const a={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},o=(0,n.createElementVNode)("path",{fill:"currentColor",d:"m795.904 750.72l124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704a352 352 0 0 0 0 704z"},null,-1),c=[o];function i(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",a,c)}t.A={name:"ep-search",render:i}}}]);