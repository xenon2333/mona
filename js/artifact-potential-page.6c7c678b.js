"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[440],{1078:function(e,t,l){l.d(t,{Uu:function(){return n},kS:function(){return i},m6:function(){return r}});l(14602);var a=l(61565);l(30789),l(60933);function n(e,t){const a=new Worker(new URL(l.p+l.u(806),l.b));return new Promise((l,n)=>{a.onmessage=function(n){const o=n.data.type;if("ready"===o)a.postMessage({input:e,artifacts:t});else if("result"===o){const e=n.data.data.result;a.terminate(),l(e)}},a.onerror=function(e){n(e)}})}l(96484);var o=l(8402);function i(e,t,a=3e5){const n=new Worker(new URL(l.p+l.u(453),l.b)),i=(0,o.A4)(e);return new Promise((e,l)=>{const o=setTimeout(()=>{l("计算超时")},a);n.onmessage=a=>{if("ready"===a.data.type)n.postMessage({potentialFunctionInterface:i,artifacts:t});else if("progress"===a.data.type)console.log(`计算进度: ${a.data.processed}/${a.data.total} (${a.data.percentage}%)`);else if("error"===a.data.type)clearTimeout(o),l("计算发生错误："+a.data.message);else if("results"===a.data.type){const t=a.data.data.results;clearTimeout(o),e(t)}},n.onerror=e=>{l("计算发生错误："+e.message),clearTimeout(o)}}).finally(()=>{n.terminate()})}async function r(e,t,l,n){const o=await(0,a.N)();return o.CommonInterface.get_artifacts_rank_by_character(e,t,l,n)}},13267:function(e,t,l){l.r(t),l.d(t,{default:function(){return Z}});var a=l(74061),n=l(74240),o=l(73577),i=l(73517),r=(l(69377),l(96867)),c=(l(21716),l(40079)),u=(l(55324),l(10700)),s=(l(99482),l(34995)),m=(l(83620),l(14602),l(87136),l(40173),l(96337)),f={ArtifactEff:{name:"ArtifactEff",chs:"有效词条",description:"以单次强化最大档位为1分",badge:m,config:[{default:!1,name:"atk_use",title:1020,type:"bool"},{default:0,max:1,min:0,name:"atk_weight",title:1021,type:"float"},{default:!0,name:"atk_p_use",title:1006,type:"bool"},{default:1,max:1,min:0,name:"atk_p_weight",title:1007,type:"float"},{default:!1,name:"hp_use",title:1809,type:"bool"},{default:0,max:1,min:0,name:"hp_weight",title:1810,type:"float"},{default:!1,name:"hp_p_use",title:1791,type:"bool"},{default:0,max:1,min:0,name:"hp_p_weight",title:1792,type:"float"},{default:!1,name:"def_use",title:2473,type:"bool"},{default:0,max:1,min:0,name:"def_weight",title:2474,type:"float"},{default:!1,name:"def_p_use",title:2468,type:"bool"},{default:0,max:1,min:0,name:"def_p_weight",title:2469,type:"float"},{default:!0,name:"critical_use",title:1369,type:"bool"},{default:1,max:1,min:0,name:"critical_weight",title:1370,type:"float"},{default:!0,name:"critical_damage_use",title:1362,type:"bool"},{default:1,max:1,min:0,name:"critical_damage_weight",title:1363,type:"float"},{default:!1,name:"elemental_mastery_use",title:341,type:"bool"},{default:0,max:1,min:0,name:"elemental_mastery_weight",title:342,type:"float"},{default:!1,name:"recharge_use",title:291,type:"bool"},{default:0,max:1,min:0,name:"recharge_weight",title:292,type:"float"}]}};Object.freeze(f);const d=f;function p(e){var t;const l=d[e];if(!l)return"NoConfig";let a=null!==(t=l.config)&&void 0!==t?t:[];if(0===a.length)return"NoConfig";let n={};for(let o of a)n[o.name]=o.default;return{[e]:n}}var g=l(52600),v=l(1078),h=l(24821),V=l(50887);l(81826),l(8365);function y(e,t,l,n,o,i){const r=V.P9,c=V.AV;return(0,a.openBlock)(),(0,a.createBlock)(c,{"model-value":l.modelValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t))},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.potentialFunctionNames,e=>((0,a.openBlock)(),(0,a.createBlock)(r,{key:e.name,label:n.t("pfName",e.name),value:e.name},null,8,["label","value"]))),128))]),_:1},8,["model-value"])}var N=l(53832);let _=[];for(const ee in d){const e=d[ee].chs;_.push({name:ee,chs:e})}Object.freeze(_);var k={name:"SelectPotentialFunctionName",props:["modelValue"],emits:["update:modelValue"],created(){this.potentialFunctionNames=_},setup(){const{t:e}=(0,N.s9)();return{t:e}}},x=l(66262);const w=(0,x.A)(k,[["render",y]]);var E=w,b=l(80535),C=l(58457),A=l(67062),S=l(64699),B=l(10644),T=l(73427),U=l(22414);const F={class:"root"},P={class:"pf-detail"},D=["src"],I={class:"pf-title"},$={class:"pf-description"},L={class:"pf-config"},M={class:"filter"},O={class:"filter-item"},W={class:"filter-title"},z={class:"filter-item"},R={class:"filter-title"},j={class:"filter-item"},q={class:"filter-title"},H={style:{margin:"0 0 20px 0"}},X={class:"filter-title"},G={class:"filter-level"},K={class:"artifacts-div"},Q={class:"pager"};var J=(0,a.defineComponent)({__name:"NewArtifactPotentialPage",setup(e){const{t:t}=(0,N.s9)(),l=(0,T.D)(),m=(0,a.ref)("ArtifactEff"),f=(0,a.computed)(()=>{const e=d[m.value];return null===e||void 0===e?void 0:e.badge}),V=(0,a.computed)(()=>t("pfDesc",m.value)),y=(0,a.computed)(()=>{const e=d[m.value];return e?e.config:[]}),_=(0,a.ref)(p("ArtifactEff")),k=(0,a.ref)([]),x=(0,a.computed)(()=>k.value.length>0?k.value[0][1]:Number.MAX_SAFE_INTEGER),w=(0,a.ref)([]),J=(0,a.ref)([]),Y=(0,a.ref)([]),Z=(0,a.ref)([0,20]),ee=(0,a.computed)(()=>{let e=[];for(let t of k.value){const a=l.artifacts.value.get(t[0]);if(!a)continue;if(w.value.length>0&&-1===w.value.indexOf(a.position))continue;if(J.value.length>0&&-1===J.value.indexOf(a.setName))continue;if(Y.value.length>0&&-1===Y.value.indexOf(a.mainTag.name))continue;const n=a.level;n<Z.value[0]||n>Z.value[1]||e.push(t)}return e}),te=(0,a.ref)(1),le=(0,a.computed)(()=>{const e=te.value;return ee.value.slice(20*(e-1),Math.min(20*e,ee.value.length))}),ae=(0,a.computed)(()=>{const e=[];for(let t of le.value){const[a,n]=t,o=l.artifacts.value.get(a);o&&e.push([o,n])}return e}),ne=(0,a.computed)(()=>{const e=_.value;let t;return t="NoConfig"===e?"NoConfig":"object"===typeof e&&e[m.value]&&"ArtifactEff"===m.value?{ArtifactEff:e[m.value]}:"NoConfig",{name:m.value,config:t}});function oe(){const e=(0,g.WF)();let l=0,a=0;e.forEach(e=>{e.level>20?(e.level=20,a++):e.level<0?(e.level=0,a++):Number.isInteger(e.level)?l++:(e.level=Math.floor(e.level),a++)}),a>0&&console.warn(`修复了 ${a} 个异常等级的圣遗物，有效圣遗物: ${l}`);const i=ne.value;if(console.log("pfInterface:",i),console.log("potentialFunctionConfig:",_.value),console.log("artifactsWasm count:",e.length),console.log("Sample artifacts levels:",e.slice(0,10).map(e=>e.level)),0===e.length)return void(0,n.nk)({message:"没有圣遗物",type:"warning"});const r=o.Ks.service({text:t("misc","monaCalculating")+" 0%",lock:!0,fullscreen:!0}),c=console.log;let u=!0;console.log=function(e,...l){if("string"===typeof e)if(e.includes("计算进度:")){u=!1;const l=e.match(/(\d+)%/);l&&r.setText(t("misc","monaCalculatingProgress").replace("{0}",l[1]))}else e.includes("high-performance")||e.includes("High-performance")?e.includes("Starting")?r.setText(t("misc","monaCalculatingHighPerf")):e.includes("completed")&&r.setText(t("misc","monaCalculatingComplete")):(e.includes("safe batch processing")||e.includes("Starting safe"))&&(u=!1,r.setText(t("misc","monaCalculatingSafe")));c.call(console,e,...l)},(0,v.kS)(i,e,6e5).then(e=>{k.value=e}).catch(e=>{console.log(e),(0,n.nk)({message:e,type:"error"})}).finally(()=>{console.log=c,r.close()})}return(e,l)=>{const n=s.uD,o=u.S2,d=c.lq,p=r.aQ,g=i.S2;return(0,a.openBlock)(),(0,a.createElementBlock)("div",F,[(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(n,{md:6,sm:24,class:"mona-scroll-hidden left"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(E,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e)},null,8,["modelValue"]),(0,a.createElementVNode)("div",P,[(0,a.createElementVNode)("img",{src:(0,a.unref)(f),class:"pf-image",alt:"图"},null,8,D),(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("p",I,(0,a.toDisplayString)((0,a.unref)(t)("pfName",m.value)),1),(0,a.createElementVNode)("p",$,(0,a.toDisplayString)((0,a.unref)(V)),1)])]),(0,a.createElementVNode)("div",L,[(0,a.createVNode)((0,a.unref)(S.A),{modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=e=>_.value=e),"item-name":m.value,configs:(0,a.unref)(y)},null,8,["modelValue","item-name","configs"])])]),_:1}),(0,a.createVNode)(n,{md:18,sm:24,class:"col-right mona-scroll-hidden"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(o,{type:"primary",icon:(0,a.unref)(U.A),onClick:oe},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)((0,a.unref)(t)("poPage.start")),1)]),_:1},8,["icon"])]),(0,a.createElementVNode)("div",M,[(0,a.createElementVNode)("span",O,[(0,a.createElementVNode)("span",W,(0,a.toDisplayString)((0,a.unref)(t)("misc.artSlot")),1),(0,a.createVNode)((0,a.unref)(b.A),{modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=e=>w.value=e),multiple:!0},null,8,["modelValue"])]),(0,a.createElementVNode)("span",z,[(0,a.createElementVNode)("span",R,(0,a.toDisplayString)((0,a.unref)(t)("misc.artifactSet")),1),(0,a.createVNode)(C.A,{modelValue:J.value,"onUpdate:modelValue":l[3]||(l[3]=e=>J.value=e),multiple:!0,"multiple-limit":5},null,8,["modelValue"])]),(0,a.createElementVNode)("span",j,[(0,a.createElementVNode)("span",q,(0,a.toDisplayString)((0,a.unref)(t)("misc.mainStat")),1),(0,a.createVNode)(A.A,{modelValue:Y.value,"onUpdate:modelValue":l[4]||(l[4]=e=>Y.value=e),multiple:!0,"include-any":!1},null,8,["modelValue"])])]),(0,a.createElementVNode)("div",H,[(0,a.createElementVNode)("span",X,(0,a.toDisplayString)((0,a.unref)(t)("misc.lvl")),1),(0,a.createElementVNode)("div",G,[(0,a.createVNode)(d,{min:0,max:Z.value[1],modelValue:Z.value[0],"onUpdate:modelValue":l[5]||(l[5]=e=>Z.value[0]=e)},null,8,["max","modelValue"]),(0,a.createTextVNode)(" ~ "),(0,a.createVNode)(d,{min:Z.value[0],max:20,modelValue:Z.value[1],"onUpdate:modelValue":l[6]||(l[6]=e=>Z.value[1]=e)},null,8,["min","modelValue"])])]),(0,a.createElementVNode)("div",K,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(ae),e=>((0,a.openBlock)(),(0,a.createBlock)(B.A,{item:e[0],extra:e[1].toFixed(2),"show-back":!0,"back-value":e[1]/(0,a.unref)(x)},null,8,["item","extra","back-value"]))),256))]),(0,a.createElementVNode)("div",Q,[(0,a.createVNode)(p,{total:(0,a.unref)(ee).length,"page-size":20,"current-page":te.value,"onUpdate:current-page":l[7]||(l[7]=e=>te.value=e),"hide-on-single-page":"",layout:"prev, pager, next",small:!(0,a.unref)(h.U)},null,8,["total","current-page","small"])])]),_:1})]),_:1})])}}});const Y=(0,x.A)(J,[["__scopeId","data-v-6a73607d"]]);var Z=Y},80535:function(e,t,l){l.d(t,{A:function(){return s}});var a=l(50887),n=(l(81826),l(8365),l(74061));function o(e,t,l,o,i,r){const c=a.P9,u=a.AV;return(0,n.openBlock)(),(0,n.createBlock)(u,{value:l.value,onInput:t[0]||(t[0]=t=>e.$emit("input",t)),multiple:l.multiple},{default:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.positions,e=>((0,n.openBlock)(),(0,n.createBlock)(c,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value","multiple"])}var i=l(11825),r={name:"SelectArtifactSlot",props:{value:{},multiple:{default:!1}},created(){this.positions=i.Xq}},c=l(66262);const u=(0,c.A)(r,[["render",o]]);var s=u},96484:function(e,t,l){l.d(t,{w:function(){return a}});l(14602),l(30789),l(60933);function a(e,t,a=6e5){const n=new Worker(new URL(l.p+l.u(787),l.b));return new Promise((l,o)=>{const i=setTimeout(()=>{o("计算超时")},a);n.onmessage=a=>{if("ready"===a.data.type)n.postMessage({optimizeConfig:e,artifacts:t});else{const e=a.data.data.results;clearTimeout(i),l(e)}},n.onerror=()=>{o("计算发生错误")}}).finally(()=>{n.terminate()})}}}]);