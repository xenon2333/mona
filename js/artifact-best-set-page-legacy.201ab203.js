"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[721],{20452:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(74061),r=a(73577),l=a(98971),o=(a(9767),a(48034),a(10700)),c=(a(99482),a(14602),a(61565)),s=a(74025),u=a(53438),i=(a(30789),a(60933),a(8402));function p(e,t=12e4){const n=new Worker(new URL(a.p+a.u(548),a.b)),r=(0,i.A4)(e);return new Promise((e,a)=>{const l=setTimeout(()=>{a("计算超时")},t);n.onmessage=t=>{if("ready"===t.data.type)n.postMessage({args:[r],dispatch:"best_artifact_set"});else if("result"===t.data.type){const a=t.data.result;clearTimeout(l),e(a)}},n.onerror=e=>{a("计算发生错误："+e.message),clearTimeout(l)}}).finally(()=>{n.terminate()})}var d=a(55267),f=a(89133);const m={class:"root"},y=["src"],g=["src"],v=["src"],V=["src"];var T=(0,n.defineComponent)({__name:"ArtifactSetTypeDisplay",props:{setType:null},setup(e){const t=e,a=(0,n.computed)(()=>{let e=[];if("string"===typeof t.setType)return[];"Set2"in t.setType?e.push(t.setType["Set2"]):"Set4"in t.setType?e.push(t.setType["Set4"]):"Set22"in t.setType&&(e.push(t.setType["Set22"][0]),e.push(t.setType["Set22"][1]));let a=[];for(let t of e){let e=(0,d.Mo)(t);const n=(0,f.Jv)(e);a.push(n)}return a}),r=(0,n.computed)(()=>"string"!==typeof t.setType&&"Set2"in t.setType),l=(0,n.computed)(()=>"string"!==typeof t.setType&&"Set4"in t.setType),o=(0,n.computed)(()=>"string"!==typeof t.setType&&"Set22"in t.setType),c=(0,n.computed)(()=>"Misc"===t.setType);return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",m,[(0,n.unref)(c)?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[(0,n.createTextVNode)("散件")],64)):(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createElementVNode)("img",{src:(0,n.unref)(a)[0],class:"image"},null,8,y),(0,n.createTextVNode)("×2 ")],64)):(0,n.unref)(l)?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:2},[(0,n.createElementVNode)("img",{src:(0,n.unref)(a)[0],class:"image"},null,8,g),(0,n.createTextVNode)("×4 ")],64)):(0,n.unref)(o)?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:3},[(0,n.createElementVNode)("img",{src:(0,n.unref)(a)[0],class:"image"},null,8,v),(0,n.createElementVNode)("img",{src:(0,n.unref)(a)[1],class:"image"},null,8,V)],64)):(0,n.createCommentVNode)("",!0)]))}}),h=a(66262);const k=(0,h.A)(T,[["__scopeId","data-v-eae5713a"]]);var N=k,w=a(53832);const _={class:"root"},x={class:"top"},S={class:"right"};var C=(0,n.defineComponent)({__name:"CalcBestArtifactSetPage",async setup(e){let t,a;const{t:i}=(0,w.s9)(),f=([t,a]=(0,n.withAsyncContext)(()=>(0,c.N)()),t=await t,a(),(0,u.S)()),m=(0,n.ref)(""),y=(0,n.computed)(()=>{if(""!==m.value)return f.getPreset(m.value)}),g=(0,n.computed)(()=>{var e;const t=null===(e=y.value)||void 0===e?void 0:e.item;if(!t)return null;let a=null;"custom"===t.artifactEffectMode&&(a=t.artifactConfig);const n={character:t.character,weapon:t.weapon,target_function:t.targetFunction,buffs:t.buffs,enemy:null,artifact_config:a};return n}),v=(0,n.ref)([]);async function V(){const e=r.Ks.service({lock:!0,fullscreen:!0,text:i("misc","monaCalculating")}),t=await p(g.value,12e4);t.reverse();const a=t[0].value,n=[];for(let r=0;r<t.length;r++){const e=t[r];n.push({stats:e.stats,value:e.value,setType:e.set_type,ratio:e.value/a})}v.value=n,e.close()}function T(e){const t=(0,d.S0)(e);return i("stat",t)}return(e,t)=>{const a=o.S2,r=l.o8,c=l.Up;return(0,n.openBlock)(),(0,n.createElementBlock)("div",_,[(0,n.createElementVNode)("div",x,[(0,n.createVNode)((0,n.unref)(s.A),{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),style:{"margin-right":"8px"}},null,8,["modelValue"]),(0,n.createVNode)(a,{onClick:V,type:"primary"},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)("Calc")]),_:1})]),(0,n.createElementVNode)("div",S,[(0,n.createVNode)(c,{data:v.value},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(r,{label:"序号",width:"64"},{default:(0,n.withCtx)(({$index:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e+1),1)]),_:1}),(0,n.createVNode)(r,{label:"套装","min-width":"120"},{default:(0,n.withCtx)(({row:e})=>[(0,n.createVNode)(N,{setType:e.setType},null,8,["setType"])]),_:1}),(0,n.createVNode)(r,{label:"时之沙"},{default:(0,n.withCtx)(({row:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(T(e.stats[0])),1)]),_:1}),(0,n.createVNode)(r,{label:"空之杯"},{default:(0,n.withCtx)(({row:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(T(e.stats[1])),1)]),_:1}),(0,n.createVNode)(r,{label:"理之冠"},{default:(0,n.withCtx)(({row:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(T(e.stats[2])),1)]),_:1}),(0,n.createVNode)(r,{label:"值/百分数"},{default:(0,n.withCtx)(({row:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.value.toFixed(1))+"/"+(0,n.toDisplayString)((100*e.ratio).toFixed(1))+"% ",1)]),_:1})]),_:1},8,["data"])])])}}});const B=(0,h.A)(C,[["__scopeId","data-v-115b4c70"]]);var b=B},56981:function(e,t,a){a(28926)},74025:function(e,t,a){a.d(t,{A:function(){return s}});var n=a(74061),r=a(50887),l=(a(81826),a(8365),a(14602),a(53438)),o={__name:"SelectPreset",props:{modelValue:String},setup(e){const t=(0,l.S)(),a=(0,n.computed)(()=>{let e=[];for(let a of t.allFlat.value)e.push(a.name);return e});return(t,l)=>{const o=r.P9,c=r.AV;return(0,n.openBlock)(),(0,n.createBlock)(c,{"model-value":e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=e=>t.$emit("update:modelValue",e))},{default:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(a),e=>((0,n.openBlock)(),(0,n.createBlock)(o,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["model-value"])}}};const c=o;var s=c}}]);