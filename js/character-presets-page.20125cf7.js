"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[413],{17021:function(e,t,n){n.d(t,{A:function(){return p}});var a=n(74061),l=n(74093),o=(n(30023),n(41905));const c=e=>((0,a.pushScopeId)("data-v-4026776b"),e=e(),(0,a.popScopeId)(),e),r={class:"center-div"},i=c(()=>(0,a.createElementVNode)("span",null,"点击，或拖拽上传",-1)),s={key:0,class:"filename"},u=["accept"];var d=(0,a.defineComponent)({__name:"ImportBlock",props:{accept:null},setup(e,{expose:t}){const n=e,c=(0,a.ref)(!1);function d(e){e.preventDefault(),c.value=!0}function m(e){e.preventDefault(),c.value=!1}function f(e){e.preventDefault()}const p=(0,a.ref)(null),v=(0,a.ref)(!1),k=(0,a.ref)(""),g=(0,a.ref)(null);function N(){g.value&&g.value.click()}function V(){if(g.value&&g.value.files){const e=Array.from(g.value.files);e.length>0&&(p.value=e[0],v.value=!0,k.value=e[0].name)}}function h(e){e.preventDefault(),c.value=!1;let t=null;if(e.dataTransfer)if(e.dataTransfer.items){for(let n=0;n<e.dataTransfer.items.length;n++)if("file"===e.dataTransfer.items[n].kind){t=e.dataTransfer.items[n].getAsFile();break}}else t=e.dataTransfer.files[0];p.value=t,t&&(v.value=!0,k.value=t.name)}function C(){return new Promise((e,t)=>{p.value||t("未选择文件");try{let n=new FileReader;n.onload=t=>{t.target&&e(t.target.result)},n.onerror=e=>{t(e)},n.readAsText(p.value)}catch(n){t(n)}})}return t({getReadPromise:C}),(e,t)=>{const p=o.A,C=l.tk;return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["root",{over:c.value}]),ref:"rootBox",onDragenter:d,onDragleave:m,onDragover:f,onDrop:h,onClick:N},[(0,a.createElementVNode)("div",r,[(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p)]),_:1}),i])],34),v.value?((0,a.openBlock)(),(0,a.createElementBlock)("p",s,(0,a.toDisplayString)(k.value),1)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("input",{type:"file",ref_key:"fileInput",ref:g,class:"file-input",onChange:V,accept:n.accept},null,40,u)])}}}),m=n(66262);const f=(0,m.A)(d,[["__scopeId","data-v-4026776b"]]);var p=f},23245:function(e,t,n){n(28926)},36798:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(74240),l=(n(23245),n(37241)),o=(n(38222),n(10700)),c=(n(38264),n(5260)),r=(n(3e3),n(99482),n(14602),n(30959),n(87136),n(40173),n(74061)),i=n(43992),s=n(13686),u=n(8402),d=n(24821),m=n(11388),f=n(76755),p=n(32358),v=n(91578),k=n(75841),g=n(53832);const N={class:"header"},V={class:"fs-12"},h={key:0,class:"buttons flex-row"},C={class:"body"},y={class:"detail-div fs-12"},w=["src"],E={class:"detail-div fs-12"},x=["src"],B={class:"detail-div fs-12"},D=["src"];var _=(0,r.defineComponent)({__name:"PresetItem",props:{item:null,name:{default:"name"},toolbar:{type:Boolean,default:!0},calculateIcon:{type:Boolean,default:!0}},setup(e){const t=e,{t:n,ta:a}=(0,g.s9)(),l=(0,r.computed)(()=>t.item.character.name),c=(0,r.computed)(()=>m.m[l.value].nameLocale),i=(0,r.computed)(()=>{const e=m.m[l.value];return e.avatar}),s=((0,r.computed)(()=>{const e=m.m[l.value];return e.chs}),(0,r.computed)(()=>f.z[t.item.weapon.name])),u=(0,r.computed)(()=>s.value.nameLocale),d=(0,r.computed)(()=>p.o[t.item.targetFunction.name]),_=(0,r.computed)(()=>d.value.nameLocale);return(l,m)=>{const f=o.S2;return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"item br-3",onClick:m[2]||(m[2]=e=>l.$emit("click"))},[(0,r.createElementVNode)("div",N,[(0,r.createElementVNode)("span",V,(0,r.toDisplayString)(t.name),1),e.toolbar?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,[(0,r.createVNode)(f,{icon:(0,r.unref)(k.A),text:"",size:"small",circle:"",onClick:m[0]||(m[0]=(0,r.withModifiers)(e=>l.$emit("delete"),["stop"])),class:"button",title:(0,r.unref)(n)("misc.del")},null,8,["icon","title"]),(0,r.createVNode)(f,{icon:(0,r.unref)(v.A),text:"",size:"small",circle:"",onClick:m[1]||(m[1]=(0,r.withModifiers)(e=>l.$emit("download"),["stop"])),class:"button",title:(0,r.unref)(n)("misc.export")},null,8,["icon","title"])])):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",C,[(0,r.createElementVNode)("div",y,[(0,r.createElementVNode)("img",{src:(0,r.unref)(i),class:"c-avatar br-50p"},null,8,w),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(a)((0,r.unref)(c))),1)]),(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("img",{src:(0,r.unref)(s).url,class:"w-avatar br-50p"},null,8,x),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(a)((0,r.unref)(u))),1)]),(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("img",{src:(0,r.unref)(d).badge,class:"tf-avatar br-50p"},null,8,D),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(a)((0,r.unref)(_))),1)])])])}}}),S=n(66262);const b=(0,S.A)(_,[["__scopeId","data-v-20745768"]]);var A=b,T=n(17021),z=n(53438),P=n(41905);const I={class:"toolbar"},L={key:0,class:"body"},M={style:{"font-size":"0.9em",color:"#606266"}};var F=(0,r.defineComponent)({__name:"CharacterPresetsPage",setup(e){const{t:t}=(0,g.s9)(),n=(0,z.S)(),m=(0,i.useRouter)(),f=(0,r.ref)(!1),p=(0,r.ref)(null);function k(){f.value=!0}async function N(){if(!p.value)return;const e=await p.value.getReadPromise();let l=null;try{l=JSON.parse(e)}catch(c){l=null}const o=(0,s.Zc)(l);if(o){for(let e of l)n.addOrOverwrite(e.name,e.item);f.value=!1}else(0,a.nk)({message:t("presetPage.wrongFormat"),type:"error"})}function V(e){const t=n.presets.value[e],a=[t],l=JSON.stringify(a);(0,u.YN)(l,"application/json",e)}function h(){const e=JSON.stringify(n.allFlat.value);(0,u.YN)(e,"application/json",t("misc.preset"))}const C=n.allFlat,y=(0,r.computed)(()=>C.value.length);function w(e){n.deletePreset(e)}function E(e){m.push({name:"calculate",params:{presetName:e}})}return(e,n)=>{const a=o.S2,i=c.kZ,s=o.fg,u=l.x0;return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(i,{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=e=>f.value=e),title:(0,r.unref)(t)("misc.import"),width:(0,r.unref)(d.U)?"60%":"90%"},{footer:(0,r.withCtx)(()=>[(0,r.createVNode)(a,{onClick:n[0]||(n[0]=e=>f.value=!1)},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("misc.cancel")),1)]),_:1}),(0,r.createVNode)(a,{type:"primary",onClick:N},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("misc.confirm")),1)]),_:1})]),default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(T.A),{ref_key:"fileImportBlock",ref:p,accept:"application/json,text/plain"},null,512)]),_:1},8,["modelValue","title","width"]),(0,r.createElementVNode)("div",I,[(0,r.createVNode)(s,null,{default:(0,r.withCtx)(()=>[(0,r.createVNode)(a,{icon:(0,r.unref)(v.A),onClick:h},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("presetPage.exportAll")),1)]),_:1},8,["icon"]),(0,r.createVNode)(a,{icon:(0,r.unref)(P.A),onClick:k},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("misc.import")),1)]),_:1},8,["icon"])]),_:1})]),(0,r.unref)(y)>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",L,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(C),e=>((0,r.openBlock)(),(0,r.createBlock)(A,{item:e.item,name:e.name,"calculate-icon":!1,onDelete:t=>w(e.name),onDownload:t=>V(e.name),class:"item",onClick:t=>E(e.name)},null,8,["item","name","onDelete","onDownload","onClick"]))),256))])):((0,r.openBlock)(),(0,r.createBlock)(u,{key:1},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("p",M,[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("presetPage.go")),1),(0,r.createElementVNode)("span",{class:"route-item",onClick:n[2]||(n[2]=t=>e.$router.replace("/calculate"))},(0,r.toDisplayString)((0,r.unref)(t)("misc.calculator")),1),(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("presetPage.toCalc")),1)])]),_:1}))])}}});const R=(0,S.A)(F,[["__scopeId","data-v-60ac4552"]]);var O=R},38264:function(e,t,n){n(28926)},41905:function(e,t,n){var a=n(74061);const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},o=(0,a.createElementVNode)("path",{fill:"currentColor",d:"M105.4 182.6c12.5 12.49 32.76 12.5 45.25.001L224 109.3V352c0 17.67 14.33 32 32 32s32-14.33 32-32V109.3l73.38 73.38c12.49 12.49 32.75 12.49 45.25-.001c12.49-12.49 12.49-32.75 0-45.25l-128-128C272.4 3.125 264.2 0 256 0s-16.4 3.125-22.6 9.375L105.4 137.4c-12.52 12.5-12.52 32.7 0 45.2zM480 352H320c0 35.35-28.65 64-64 64s-64-28.65-64-64H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96c0-17.7-14.3-32-32-32zm-48 104c-13.2 0-24-10.8-24-24s10.8-24 24-24s24 10.8 24 24s-10.8 24-24 24z"},null,-1),c=[o];function r(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",l,c)}t.A={name:"fa6-solid-upload",render:r}},91578:function(e,t,n){var a=n(74061);const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},o=(0,a.createElementVNode)("path",{fill:"currentColor",d:"M480 352H346.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96c0-17.7-14.3-32-32-32zm-48 104c-13.2 0-24-10.8-24-24s10.8-24 24-24s24 10.8 24 24s-10.8 24-24 24zm-198.6-81.4c6.2 6.3 14.4 9.4 22.6 9.4s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32c-17.7 0-32 14.33-32 32v242.8l-73.4-73.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"},null,-1),c=[o];function r(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",l,c)}t.A={name:"fa6-solid-download",render:r}}}]);