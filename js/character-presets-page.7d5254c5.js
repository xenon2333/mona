"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[413],{34463:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(37241),l=(n(38222),n(10700)),o=(n(38264),n(5260)),c=(n(3e3),n(99482),n(14602),n(30959),n(87136),n(40173),n(74061)),r=n(43992),i=n(13686),s=n(8402),u=n(24821),m=n(11388),d=n(76755),f=n(32358),p=n(91578),v=n(75841),g=n(53452),k=n(53832);const N={class:"header"},V={class:"fs-12"},h={key:0,class:"buttons flex-row"},C={class:"body"},y={class:"detail-div fs-12"},w=["src"],x={class:"detail-div fs-12"},B=["src"],E={class:"detail-div fs-12"},D=["src"];var _=(0,c.defineComponent)({__name:"PresetItem",props:{item:null,name:{default:"name"},toolbar:{type:Boolean,default:!0},calculateIcon:{type:Boolean,default:!0}},setup(e){const t=e,{t:n,ta:a}=(0,k.s9)(),o=(0,c.computed)(()=>t.item.character.name),r=(0,c.computed)(()=>m.m[o.value].nameLocale),i=(0,c.computed)(()=>{const e=m.m[o.value];return e.avatar}),s=((0,c.computed)(()=>{const e=m.m[o.value];return e.chs}),(0,c.computed)(()=>d.z[t.item.weapon.name])),u=(0,c.computed)(()=>s.value.nameLocale),_=(0,c.computed)(()=>f.o[t.item.targetFunction.name]),S=(0,c.computed)(()=>_.value.nameLocale);return(o,m)=>{const d=l.S2;return(0,c.openBlock)(),(0,c.createElementBlock)("div",{class:"item br-3",onClick:m[3]||(m[3]=e=>o.$emit("click"))},[(0,c.createElementVNode)("div",N,[(0,c.createElementVNode)("span",V,(0,c.toDisplayString)(t.name),1),e.toolbar?((0,c.openBlock)(),(0,c.createElementBlock)("div",h,[(0,c.createVNode)(d,{icon:(0,c.unref)(v.A),text:"",size:"small",circle:"",onClick:m[0]||(m[0]=(0,c.withModifiers)(e=>o.$emit("delete"),["stop"])),class:"button",title:(0,c.unref)(n)("misc.del")},null,8,["icon","title"]),(0,c.createVNode)(d,{icon:(0,c.unref)(g.A),text:"",size:"small",circle:"",onClick:m[1]||(m[1]=(0,c.withModifiers)(e=>o.$emit("rename"),["stop"])),class:"button",title:(0,c.unref)(n)("misc.rename")},null,8,["icon","title"]),(0,c.createVNode)(d,{icon:(0,c.unref)(p.A),text:"",size:"small",circle:"",onClick:m[2]||(m[2]=(0,c.withModifiers)(e=>o.$emit("download"),["stop"])),class:"button",title:(0,c.unref)(n)("misc.export")},null,8,["icon","title"])])):(0,c.createCommentVNode)("",!0)]),(0,c.createElementVNode)("div",C,[(0,c.createElementVNode)("div",y,[(0,c.createElementVNode)("img",{src:(0,c.unref)(i),class:"c-avatar br-50p"},null,8,w),(0,c.createElementVNode)("span",null,(0,c.toDisplayString)((0,c.unref)(a)((0,c.unref)(r))),1)]),(0,c.createElementVNode)("div",x,[(0,c.createElementVNode)("img",{src:(0,c.unref)(s).url,class:"w-avatar br-50p"},null,8,B),(0,c.createElementVNode)("span",null,(0,c.toDisplayString)((0,c.unref)(a)((0,c.unref)(u))),1)]),(0,c.createElementVNode)("div",E,[(0,c.createElementVNode)("img",{src:(0,c.unref)(_).badge,class:"tf-avatar br-50p"},null,8,D),(0,c.createElementVNode)("span",null,(0,c.toDisplayString)((0,c.unref)(a)((0,c.unref)(S))),1)])])])}}}),S=n(66262);const b=(0,S.A)(_,[["__scopeId","data-v-becdaee6"]]);var A=b,P=n(76955),T=n(74240),z=n(79475),I=n(53438),M=n(41905);const R={class:"toolbar"},L={key:0,class:"body"},F={style:{"font-size":"0.9em",color:"#606266"}};var O=(0,c.defineComponent)({__name:"CharacterPresetsPage",setup(e){const{t:t}=(0,k.s9)(),n=(0,I.S)(),m=(0,r.useRouter)(),d=(0,c.ref)(!1),f=(0,c.ref)(null);function v(){d.value=!0}async function g(){if(!f.value)return;const e=await f.value.getReadPromise();let a=null;try{a=JSON.parse(e)}catch(o){a=null}const l=(0,i.Zc)(a);if(l){for(let e of a)n.addOrOverwrite(e.name,e.item);d.value=!1}else(0,T.nk)({message:t("presetPage.wrongFormat"),type:"error"})}function N(e){const t=n.presets.value[e],a=[t],l=JSON.stringify(a);(0,s.YN)(l,"application/json",e)}function V(){const e=JSON.stringify(n.allFlat.value);(0,s.YN)(e,"application/json",t("misc.preset"))}const h=n.allFlat,C=(0,c.computed)(()=>h.value.length);function y(e){n.deletePreset(e)}function w(e){console.log("Renaming preset:",e),z.s.prompt(t("presetPage.renamePrompt")||"请输入新预设名",t("misc.rename"),{confirmButtonText:t("misc.confirm"),cancelButtonText:t("misc.cancel"),inputValue:e}).then(({value:a})=>{console.log("Prompt confirmed with value:",a);const l=(a||"").trim();l&&l!==e?(console.log("Renaming to:",l),n.renamePreset(e,l),T.nk.success(t("misc.success")||"成功")):l===e&&(console.log("Name not changed"),T.nk.info(t("misc.noChange")||"名称未改变"))}).catch(e=>{console.log("Prompt cancelled or error:",e)})}function x(e){m.push({name:"calculate",params:{presetName:e}})}return(e,n)=>{const r=l.S2,i=o.kZ,s=l.fg,m=a.x0;return(0,c.openBlock)(),(0,c.createElementBlock)("div",null,[(0,c.createVNode)(i,{modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=e=>d.value=e),title:(0,c.unref)(t)("misc.import"),width:(0,c.unref)(u.U)?"60%":"90%"},{footer:(0,c.withCtx)(()=>[(0,c.createVNode)(r,{onClick:n[0]||(n[0]=e=>d.value=!1)},{default:(0,c.withCtx)(()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("misc.cancel")),1)]),_:1}),(0,c.createVNode)(r,{type:"primary",onClick:g},{default:(0,c.withCtx)(()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("misc.confirm")),1)]),_:1})]),default:(0,c.withCtx)(()=>[(0,c.createVNode)((0,c.unref)(P.A),{ref_key:"fileImportBlock",ref:f,accept:"application/json,text/plain"},null,512)]),_:1},8,["modelValue","title","width"]),(0,c.createElementVNode)("div",R,[(0,c.createVNode)(s,null,{default:(0,c.withCtx)(()=>[(0,c.createVNode)(r,{icon:(0,c.unref)(p.A),onClick:V},{default:(0,c.withCtx)(()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("presetPage.exportAll")),1)]),_:1},8,["icon"]),(0,c.createVNode)(r,{icon:(0,c.unref)(M.A),onClick:v},{default:(0,c.withCtx)(()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("misc.import")),1)]),_:1},8,["icon"])]),_:1})]),(0,c.unref)(C)>0?((0,c.openBlock)(),(0,c.createElementBlock)("div",L,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(h),e=>((0,c.openBlock)(),(0,c.createBlock)(A,{key:e.name,item:e.item,name:e.name,"calculate-icon":!1,onDelete:t=>y(e.name),onDownload:t=>N(e.name),onRename:t=>w(e.name),class:"item",onClick:t=>x(e.name)},null,8,["item","name","onDelete","onDownload","onRename","onClick"]))),128))])):((0,c.openBlock)(),(0,c.createBlock)(m,{key:1},{default:(0,c.withCtx)(()=>[(0,c.createElementVNode)("p",F,[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("presetPage.go")),1),(0,c.createElementVNode)("span",{class:"route-item",onClick:n[2]||(n[2]=t=>e.$router.replace("/calculate"))},(0,c.toDisplayString)((0,c.unref)(t)("misc.calculator")),1),(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("presetPage.toCalc")),1)])]),_:1}))])}}});const $=(0,S.A)(O,[["__scopeId","data-v-9c65b3e0"]]);var H=$},38264:function(e,t,n){n(28926)},41905:function(e,t,n){var a=n(74061);const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},o=(0,a.createElementVNode)("path",{fill:"currentColor",d:"M105.4 182.6c12.5 12.49 32.76 12.5 45.25.001L224 109.3V352c0 17.67 14.33 32 32 32s32-14.33 32-32V109.3l73.38 73.38c12.49 12.49 32.75 12.49 45.25-.001c12.49-12.49 12.49-32.75 0-45.25l-128-128C272.4 3.125 264.2 0 256 0s-16.4 3.125-22.6 9.375L105.4 137.4c-12.52 12.5-12.52 32.7 0 45.2zM480 352H320c0 35.35-28.65 64-64 64s-64-28.65-64-64H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96c0-17.7-14.3-32-32-32zm-48 104c-13.2 0-24-10.8-24-24s10.8-24 24-24s24 10.8 24 24s-10.8 24-24 24z"},null,-1),c=[o];function r(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",l,c)}t.A={name:"fa6-solid-upload",render:r}},76955:function(e,t,n){n.d(t,{A:function(){return p}});var a=n(74061),l=n(74093),o=(n(30023),n(41905));const c=e=>((0,a.pushScopeId)("data-v-0da14865"),e=e(),(0,a.popScopeId)(),e),r={class:"center-div"},i=c(()=>(0,a.createElementVNode)("span",null,"点击，或拖拽上传",-1)),s={key:0,class:"filename"},u=["accept"];var m=(0,a.defineComponent)({__name:"ImportBlock",props:{accept:null},setup(e,{expose:t}){const n=e,c=(0,a.ref)(!1);function m(e){e.preventDefault(),c.value=!0}function d(e){e.preventDefault(),c.value=!1}function f(e){e.preventDefault()}const p=(0,a.ref)(null),v=(0,a.ref)(!1),g=(0,a.ref)(""),k=(0,a.ref)(null);function N(){k.value&&k.value.click()}function V(){if(k.value&&k.value.files){const e=Array.from(k.value.files);e.length>0&&(p.value=e[0],v.value=!0,g.value=e[0].name)}}function h(e){e.preventDefault(),c.value=!1;let t=null;if(e.dataTransfer)if(e.dataTransfer.items){for(let n=0;n<e.dataTransfer.items.length;n++)if("file"===e.dataTransfer.items[n].kind){t=e.dataTransfer.items[n].getAsFile();break}}else t=e.dataTransfer.files[0];p.value=t,t&&(v.value=!0,g.value=t.name)}function C(){return new Promise((e,t)=>{p.value||t("未选择文件");try{let n=new FileReader;n.onload=t=>{t.target&&e(t.target.result)},n.onerror=e=>{console.error(e),t("文件读取失败")},n.readAsText(p.value)}catch(n){t(n)}})}return t({getReadPromise:C}),(e,t)=>{const p=o.A,C=l.tk;return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["root",{over:c.value}]),ref:"rootBox",onDragenter:m,onDragleave:d,onDragover:f,onDrop:h,onClick:N},[(0,a.createElementVNode)("div",r,[(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p)]),_:1}),i])],34),v.value?((0,a.openBlock)(),(0,a.createElementBlock)("p",s,(0,a.toDisplayString)(g.value),1)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("input",{type:"file",ref_key:"fileInput",ref:k,class:"file-input",onChange:V,accept:n.accept},null,40,u)])}}}),d=n(66262);const f=(0,d.A)(m,[["__scopeId","data-v-0da14865"]]);var p=f},91578:function(e,t,n){var a=n(74061);const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},o=(0,a.createElementVNode)("path",{fill:"currentColor",d:"M480 352H346.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96c0-17.7-14.3-32-32-32zm-48 104c-13.2 0-24-10.8-24-24s10.8-24 24-24s24 10.8 24 24s-10.8 24-24 24zm-198.6-81.4c6.2 6.3 14.4 9.4 22.6 9.4s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32c-17.7 0-32 14.33-32 32v242.8l-73.4-73.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"},null,-1),c=[o];function r(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",l,c)}t.A={name:"fa6-solid-download",render:r}}}]);